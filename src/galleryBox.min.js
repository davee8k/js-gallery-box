/**
 * jQuery Gallery Box version for jQuery 1.8+, support IE8+
 *
 * @author DaVee8k
 * @version 0.28.3
 * @license WTFNMFPL 1.0
 */
!function(r){r.fn.galleryBox=function(t){var s=this,i=(navigator.userLanguage||navigator.language).substr(0,2).toLowerCase();return this.text={en:{prev:"previous",next:"next",close:"close",zoom:"detail",loading:"loading ...",error:"Image not found."},cs:{prev:"předchozí",next:"další",close:"zavřít",zoom:"zvětšit",loading:"načítá se ...",error:"Obrázek nelze načíst."}},this.locale=void 0===this.text[i]?this.text.en:this.text[i],this.icons=void 0===t.icons?{prev:"&lt;",next:"&gt;",close:"&times;"}:t.icons,this.plugin=void 0!==t.plugin&&t.plugin,this.box=null,this.mark=void 0===t.mark?null:t.mark,this.item=void 0===t.item?"a":t.item,this.arrows=void 0===t.arrows||t.arrows,this.pager=void 0!==t.pager&&t.pager,this.duration=void 0===t.duration?250:t.duration,this.shrink=void 0===t.shrink||t.shrink,this.iframe=void 0===t.iframe?null:t.iframe,this.current=-1,this.count=0,this.data=Array(),this.load=function(t){var i=r(t).find(this.item);return 0!==i.length?r(i).each(function(){s.loadImage(this)}):s.loadImage(t),0<this.count},this.loadImage=function(t){var i,e;void 0!==r(t).attr("href")&&(i=null,i=void 0!==r(t).data("title")?r(t).data("title"):(void 0!==r(t).attr("title")?r(t):r(t).children("img")).prop("title"),this.data.push({src:r(t).attr("href"),title:i,link:t}),e=this.count+0,r(t).click(function(){return s.showNum(e)}),this.count++)},this.insertImage=function(t,i,e){this.data.push({src:t,title:i,link:e}),this.count++},this.createLink=function(t){for(var i=(i=r("#"+t+" img").attr("src")).substring(i.lastIndexOf("/")+1),e=0;e<this.data.length;e++)if(0<this.data[e].src.indexOf(i)){r("#"+t).click(function(){return s.showNum(e)}),r("#"+t).css("cursor","pointer");break}},this.scaleImage=function(t,i){var e=r(this.box).find(".gallery-box");i&&r(this.box).append(t);var o=r(t).attr("height")||r(t).prop("height")||r(t).outerHeight(!0);0===o&&(o=null);var n=o,s=r(t).attr("width")||r(t).prop("width")||r(t).outerWidth(!0);0===s&&(s=null);var a=s;i&&r(t).detach();i=r(window).height()-r(e).outerHeight(!0)+r(e).find(".gallery-box-image").outerHeight(!0),t=r(e).width()-r(e).find(".gallery-box-content").outerWidth(!0)+r(e).find(".gallery-box-image").outerWidth(!0);return r(e)[0].getBoundingClientRect().width!==r(e).width()&&--t,this.shrink&&(i<o&&(s=s*i/o,o=i),t<s&&(o=o*t/s,s=t)),[s,o,this.shrink&&(n!=o||a!=s)]},this.showNext=function(t){return t?0<this.current&&this.showNum(this.current-1):this.current<this.count-1&&this.showNum(this.current+1),!1},this.showNum=function(i){var e=new Image,o=r(this.box).find(".gallery-box-image"),n=r(o).children("img");return 0===n.length&&(n=r(o).children("iframe")),r(this.box).addClass("gallery-box-loading"),"none"===r(this.box).css("display")&&(r(n).toggle(this.current===i),r(this.box).fadeIn(500),r(this.box).find(".gallery-box").css("top",this.center()),this.current===i)?this.showItem(n,o.height(),i,!1):(this.current=i,r(this.box).find(".gallery-box-zoom").hide(),this.setInfo(s.locale.loading),r(n).fadeOut(200,function(){var t;s.plugin&&s.plugin.showNum(i),r(this).remove(),s.isFrame(s.current)?(t=r('<iframe src="'+s.data[i].src+'" class="gallery-box-iframe" referrerpolicy="origin-when-cross-origin" allowfullscreen="">'),s.showItem(t,r(o).height()||r(n).height(),i,!0)):r(e).on("load",function(){s.showItem(this,r(o).height()||r(n).height(),i,!1)}).on("error",function(){r(e).stop(!0,!0),r(o).append(new Image),s.setInfo(s.locale.error,i)}).hide().attr("src",s.data[s.current].src)}),this.arrows&&(r(this.box).find("a.gallery-box-left").toggle(0!==this.current),r(this.box).find("a.gallery-box-right").toggle(this.current<this.count-1))),!1},this.showItem=function(t,i,e,o){var n=this.scaleImage(t,o);r(this.box).find(".gallery-box").animate({top:this.center(r(this.box).find(".gallery-box").outerHeight(!0)-i+(n[1]?parseFloat(n[1]):0))},this.duration),r(this.box).find(".gallery-box-content").animate({width:n[0]+"px"},this.duration),r(this.box).find(".gallery-box-image").append(t).animate({width:n[0]+"px",height:n[1]+"px"},this.duration,function(){r(s.box).find(".gallery-box-image").children().fadeIn(200,function(){void 0!==r(t).attr("src")&&r(s.box).removeClass("gallery-box-loading"),n[2]&&r(s.box).find(".gallery-box-zoom").prop("href",s.data[s.current].src).fadeIn(200)})}),this.setInfo(this.data[e].title,e)},this.isFrame=function(t){return!1!==this.iframe&&null!==this.data[t].link&&r(this.data[t].link).hasClass(this.iframe)},this.setInfo=function(t,i){r(this.box).find(".gallery-box-title").html(t),this.pager&&void 0!==i&&r(this.box).find(".gallery-box-num-current").text(i+1)},this.center=function(t){r(this.box).find(".gallery-box-all").width()<r(document).width()&&r(this.box).find(".gallery-box-all").width(r(document).width());t=r(window).scrollTop()+Math.round((r(window).height()-(void 0===t?r(this.box).find(".gallery-box").outerHeight(!0):t))/2);return 0<t?t+"px":0},this.appendAction=function(){r(this.box).find("a.gallery-box-left").click(function(){return s.showNext(!0)}),r(this.box).find("a.gallery-box-right").click(function(){return s.showNext(!1)}),r(document).keydown(function(t){r(s.box).is(":visible")&&(s.arrows&&37==t.keyCode?(t.preventDefault(),s.showNext(!0)):s.arrows&&39==t.keyCode?(t.preventDefault(),s.showNext(!1)):27==t.keyCode&&(t.preventDefault(),r(s.box).fadeOut(500)))}),r(this.box).find("a.gallery-box-close").click(function(){return r(s.box).fadeOut(500),!1}),r(this.box).find(".gallery-box-modal").click(function(){r(s.box).fadeOut(500)})},this.create=function(t){this.box=r('<div class="gallery-box-all"'+(this.mark?' id="'+this.mark+'"':"")+">"+(t?'<div class="gallery-box-modal"></div>':"")+"</div>"),r(this.box).append('<div class="gallery-box"><div class="gallery-box-content"><div class="gallery-box-image"><div class="gallery-box-loader"></div><img /></div><div class="gallery-box-info">'+(this.arrows?'<a class="gallery-box-left" title="'+this.locale.prev+'"><span>'+this.icons.prev+"</span></a>"+(this.pager?'<span class="gallery-box-num-current">1</span> / <span class="gallery-box-num-count">'+this.count+"</span>":"")+'<a class="gallery-box-right" title="'+this.locale.next+'"><span>'+this.icons.next+"</span></a>":"")+'<a class="gallery-box-close" title="'+this.locale.close+'"><span>'+this.icons.close+"</span></a></div>"+(this.shrink?'<a class="gallery-box-zoom" title="'+this.locale.zoom+'" target="_blank"></a>':"")+'<p class="gallery-box-title"></p></div></div>'),r("body").append(this.box)},this.load(this)&&(void 0!==t.opener&&r(this).find(t.opener).css("cursor","pointer").each(function(){r(this).click(function(){return r(s.showNum(0)),!1})}),this.create(void 0===t.modal||t.modal),this.appendAction()),{showNum:function(t){s.showNum(t)},showNext:function(t){s.showNext(t)}}}}(jQuery);