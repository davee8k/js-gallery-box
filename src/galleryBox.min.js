/**
 * jQuery Gallery Box version for jQuery 1.8+, support IE8+
 *
 * @author DaVee8k
 * @version 0.29.1
 * @license WTFNMFPL 1.0
 */
!function(r){r.fn.galleryBox=function(t){var n=this,i=(navigator.userLanguage||navigator.language).substr(0,2).toLowerCase();return this.text={en:{prev:"previous",next:"next",close:"close",zoom:"detail",loading:"loading ...",error:"Image not found."},cs:{prev:"předchozí",next:"další",close:"zavřít",zoom:"zvětšit",loading:"načítá se ...",error:"Obrázek nelze načíst."}},this.locale=void 0===this.text[i]?this.text.en:this.text[i],this.icons=void 0===t.icons?{prev:"&lt;",next:"&gt;",close:"&times;"}:t.icons,this.plugin=void 0!==t.plugin&&t.plugin,this.box=null,this.modal=void 0===t.modal||t.modal,this.mark=void 0===t.mark?null:t.mark,this.item=void 0===t.item?"a":t.item,this.arrows=void 0===t.arrows||t.arrows,this.pager=void 0!==t.pager&&t.pager,this.duration=void 0===t.duration?250:t.duration,this.swipe=!1!==t.swipe&&this.arrows,this.shrink=void 0===t.shrink||t.shrink,this.iframe=void 0===t.iframe?null:t.iframe,this.current=-1,this.count=0,this.data=Array(),this.touches=Array(),this.load=function(t){var i=r(t).find(this.item);return 0!==i.length?r(i).each(function(){n.loadImage(this)}):n.loadImage(t),0<this.count},this.loadImage=function(t){var i,e;void 0!==r(t).attr("href")&&(i=null,i=void 0!==r(t).data("title")?r(t).data("title"):(void 0!==r(t).attr("title")?r(t):r(t).children("img")).prop("title"),this.data.push({src:r(t).attr("href"),title:i,link:t}),e=this.count+0,r(t).click(function(t){t.preventDefault(),n.showNum(e)}),this.count++)},this.insertImage=function(t,i,e){this.data.push({src:t,title:i,link:e}),this.count++},this.createLink=function(t){for(var i=(i=r("#"+t+" img").attr("src")).substring(i.lastIndexOf("/")+1),e=0;e<this.data.length;e++)if(0<this.data[e].src.indexOf(i)){r("#"+t).click(function(t){t.preventDefault(),n.showNum(e)}),r("#"+t).css("cursor","pointer");break}},this.scaleImage=function(t,i){var e=r(this.box).find(".gallery-box");i&&r(this.box).append(t);var o=r(t).attr("height")||r(t).prop("height")||r(t).outerHeight(!0);0===o&&(o=null);var s=o,n=r(t).attr("width")||r(t).prop("width")||r(t).outerWidth(!0);0===n&&(n=null);var a=n;i&&r(t).detach();i=r(window).height()-r(e).outerHeight(!0)+r(e).find(".gallery-box-image").outerHeight(!0),t=r(e).width()-r(e).find(".gallery-box-content").outerWidth(!0)+r(e).find(".gallery-box-image").outerWidth(!0);return r(e)[0].getBoundingClientRect().width!==r(e).width()&&--t,this.shrink&&(i<o&&(n=n*i/o,o=i),t<n&&(o=o*t/n,n=t)),[n,o,this.shrink&&(s!=o||a!=n)]},this.showNext=function(t){t?0<this.current&&this.showNum(this.current-1):this.current<this.count-1&&this.showNum(this.current+1)},this.showNum=function(i){null===this.box&&(this.create(),this.appendAction());var e=new Image,o=r(this.box).find(".gallery-box-image"),s=r(o).children("img");0===s.length&&(s=r(o).children("iframe")),r(this.box).addClass("gallery-box-loading"),"none"===r(this.box).css("display")&&(r(s).toggle(this.current===i),r(this.box).fadeIn(500),r(this.box).find(".gallery-box").css("top",this.center()),this.current===i&&this.showItem(s,o.height(),i,!1)),this.current=i,r(this.box).find(".gallery-box-zoom").hide(),this.setInfo(n.locale.loading),r(s).fadeOut(200,function(){var t;n.plugin&&n.plugin.showNum(i),r(this).remove(),n.isFrame(n.current)?(t=r('<iframe src="'+n.data[i].src+'" class="gallery-box-iframe" referrerpolicy="origin-when-cross-origin" allowfullscreen="">'),n.showItem(t,r(o).height()||r(s).height(),i,!0)):r(e).on("load",function(){n.showItem(this,r(o).height()||r(s).height(),i,!1)}).on("error",function(){r(e).stop(!0,!0),r(o).append(new Image),n.setInfo(n.locale.error,i)}).hide().attr("src",n.data[n.current].src)}),this.arrows&&(r(this.box).find("a.gallery-box-left").toggle(0!==this.current),r(this.box).find("a.gallery-box-right").toggle(this.current<this.count-1))},this.showItem=function(t,i,e,o){var s=this.scaleImage(t,o);r(this.box).find(".gallery-box").animate({top:this.center(r(this.box).find(".gallery-box").outerHeight(!0)-i+(s[1]?parseFloat(s[1]):0))},this.duration),r(this.box).find(".gallery-box-content").animate({width:s[0]+"px"},this.duration),r(this.box).find(".gallery-box-image").append(t).animate({width:s[0]+"px",height:s[1]+"px"},this.duration,function(){r(n.box).find(".gallery-box-image").children().fadeIn(200,function(){void 0!==r(t).attr("src")&&r(n.box).removeClass("gallery-box-loading"),s[2]&&r(n.box).find(".gallery-box-zoom").prop("href",n.data[n.current].src).fadeIn(200)})}),this.setInfo(this.data[e].title,e)},this.isFrame=function(t){return!1!==this.iframe&&null!==this.data[t].link&&r(this.data[t].link).hasClass(this.iframe)},this.setInfo=function(t,i){r(this.box).find(".gallery-box-title").html(t),this.pager&&void 0!==i&&r(this.box).find(".gallery-box-num-current").text(i+1)},this.center=function(t){r(this.box).find(".gallery-box-all").width()<r(document).width()&&r(this.box).find(".gallery-box-all").width(r(document).width());t=r(window).scrollTop()+Math.round((r(window).height()-(void 0===t?r(this.box).find(".gallery-box").outerHeight(!0):t))/2);return 0<t?t+"px":0},this.appendAction=function(){var i;this.arrows&&(r(this.box).find("a.gallery-box-left").click(function(t){t.preventDefault(),i.showNext(!0)}),r(this.box).find("a.gallery-box-right").click(function(t){t.preventDefault(),i.showNext(!1)}),r(document).keydown(function(t){r(i.box).is(":visible")&&(i.arrows&&37==t.keyCode?(t.preventDefault(),i.showNext(!0)):i.arrows&&39==t.keyCode?(t.preventDefault(),i.showNext(!1)):27==t.keyCode&&(t.preventDefault(),r(i.box).fadeOut(500)))})),r(this.box).find("a.gallery-box-close").click(function(t){t.preventDefault(),r(i.box).fadeOut(500)}),r(this.box).find(".gallery-box-modal").click(function(){r(i.box).fadeOut(500)}),!0===this.swipe&&(r((i=this).box).on("touchstart",function(t){i.touches[0]=t.originalEvent.touches[0].clientX}),r(this.box).on("touchmove",function(t){i.touches[1]=t.originalEvent.touches[0].clientX}),r(this.box).on("touchend",function(){var t;2===i.touches.length&&(t=i.touches[1]-i.touches[0],Math.abs(t)>r(window).width()/10&&i.showNext(0<t)),i.touches=Array()}))},this.create=function(){this.box=r('<div class="gallery-box-all"'+(this.mark?' id="'+this.mark+'"':"")+">"+(this.modal?'<div class="gallery-box-modal"></div>':"")+"</div>"),r(this.box).append('<div class="gallery-box"><div class="gallery-box-content"><div class="gallery-box-image"><div class="gallery-box-loader"></div><img /></div><div class="gallery-box-info">'+(this.arrows?'<a class="gallery-box-left" title="'+this.locale.prev+'" href="#"><span>'+this.icons.prev+"</span></a>"+(this.pager?'<span class="gallery-box-num-current">1</span> / <span class="gallery-box-num-count">'+this.count+"</span>":"")+'<a class="gallery-box-right" title="'+this.locale.next+'" href="#"><span>'+this.icons.next+"</span></a>":"")+'<a class="gallery-box-close" title="'+this.locale.close+'" href="#"><span>'+this.icons.close+"</span></a></div>"+(this.shrink?'<a class="gallery-box-zoom" title="'+this.locale.zoom+'" target="_blank" href="#"></a>':"")+'<p class="gallery-box-title"></p></div></div>'),r("body").append(this.box)},this.load(this)&&void 0!==t.opener&&r(this).find(t.opener).css("cursor","pointer").each(function(){r(this).click(function(t){t.preventDefault(),r(n.showNum(0))})}),{showNum:function(t){n.showNum(t)},showNext:function(t){n.showNext(t)}}}}(jQuery);