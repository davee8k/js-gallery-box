/**
 * GalleryBox version for jQuery 1.8+
 * @author DaVee
 * @version 0.26
 * @license WTFNMFPL 1.0
 */
!function(t){t.fn.galleryBox=function(i){var e=this,o=(navigator.userLanguage||navigator.language).substr(0,2).toLowerCase();return this.text={en:{prev:"previous",next:"next",close:"close",zoom:"detail",loading:"loading ...",error:"Image not found."},cs:{prev:"předchozí",next:"další",close:"zavřít",zoom:"zvětšit",loading:"načítá se ...",error:"Obrázek nelze načíst."}},this.locale=void 0===this.text[o]?this.text.en:this.text[o],this.icons=void 0===i.icons?{prev:"&lt;",next:"&gt;",close:"&times;"}:i.icons,this.plugin=void 0!==i.plugin&&i.plugin,this.box,this.mark=void 0!==i.mark&&i.mark,this.page=void 0===i.page?"a":i.page,this.arrows=void 0===i.arrows||i.arrows,this.pager=void 0!==i.pager&&i.pager,this.duration=void 0===i.duration?250:i.duration,this.scale=void 0===i.scale||i.scale,this.current=-1,this.count=0,this.srcs=Array(),this.titles=Array(),this.load=function(i){var o=t(i).find(this.page);return 0!==o.length?t(o).each(function(){e.loadImage(this)}):e.loadImage(i),this.count>0},this.loadImage=function(i){if(void 0!==t(i).attr("href")){this.srcs.push(t(i).attr("href")),void 0!==t(i).data("title")?this.titles.push(t(i).data("title")):void 0!==t(i).attr("title")?this.titles.push(t(i).prop("title")):this.titles.push(t(i).children("img").prop("title"));var o=this.count+0;t(i).click(function(){return e.showNum(o)}),this.count++}},this.insertImage=function(t,i){this.srcs.push(t),this.titles.push(void 0===i?"":i),this.count++},this.createLink=function(i){var o=t("#"+i+" img").attr("src");o=o.substring(o.lastIndexOf("/")+1);for(var s=0;s<this.srcs.length;s++)if(this.srcs[s].indexOf(o)>0){t("#"+i).click(function(){return e.showNum(s)}),t("#"+i).css("cursor","pointer");break}},this.scaleImage=function(i){var e=t(i).attr("height")||t(i).prop("height"),o=e,s=t(i).attr("width")||t(i).prop("width"),a=s,n=t(window).height()-t(this.box).find(".gallery-box").outerHeight(!0)+t(this.box).find(".gallery-box-image").outerHeight(!0),l=t(this.box).find(".gallery-box").width()-t(this.box).find(".gallery-box-content").outerWidth(!0)+t(this.box).find(".gallery-box-image").outerWidth();return this.scale&&(e>n&&(s=s*n/e,e=n),s>l&&(e=e*l/s,s=l)),[s,e,this.scale&&(o!=e||a!=s)]},this.showNext=function(t){return t?this.current>0&&this.showNum(this.current-1):this.current<this.count-1&&this.showNum(this.current+1),!1},this.showNum=function(i){var o=new Image,s=t(this.box).find(".gallery-box-image"),a=t(s).children("img");return t(this.box).addClass("gallery-box-loading"),"none"===t(this.box).css("display")&&(t(a).toggle(this.current===i),t(this.box).fadeIn(500),t(this.box).find(".gallery-box").css("top",this.center()),this.current===i)?(e.showImage(a,s.height(),i),!1):(this.current=i,t(this.box).find(".gallery-box-zoom").hide(),t(this.box).find(".gallery-box-title").text(e.locale.loading),t(a).fadeOut(200,function(){e.plugin&&e.plugin.showNum(i),t(this).remove(),t(o).load(function(){t(e.box).find(".gallery-box-title").html(e.titles[e.current]),e.showImage(this,t(s).height()||t(a).height(),i+1)}).error(function(){t(o).stop(!0,!0),t(e.box).find(".gallery-box-image").append(new Image),t(e.box).find(".gallery-box-title").text(e.locale.error),t(e.box).find(".gallery-box-position").text(i+1)}).hide().attr("src",e.srcs[e.current])}),this.arrows&&(t(this.box).find("a.gallery-box-left").toggle(0!==this.current),t(this.box).find("a.gallery-box-right").toggle(this.current<this.count-1)),!1)},this.showImage=function(i,o,s){var a=this.scaleImage(i);t(this.box).find(".gallery-box").animate({top:this.center(t(this.box).find(".gallery-box").outerHeight(!0)-o+a[1])},this.duration),t(this.box).find(".gallery-box-image").append(i).animate({width:a[0]+"px",height:a[1]+"px"},this.duration,function(){t(e.box).find(".gallery-box-image img").fadeIn(200,function(){void 0!==t(i).attr("src")&&t(e.box).removeClass("gallery-box-loading"),a[2]&&t(e.box).find(".gallery-box-zoom").prop("href",e.srcs[e.current]).fadeIn(200)}),e.pager&&t(e.box).find(".gallery-box-num-current").text(s)})},this.center=function(i){t(this.box).find(".gallery-box-all").width()<t(document).width()&&t(this.box).find(".gallery-box-all").width(t(document).width());var e=t(window).scrollTop()+Math.round((t(window).height()-(void 0===i?t(this.box).find(".gallery-box").outerHeight(!0):i))/2);return"fixed"!==t(this.box).find(".gallery-box-black").css("position")&&(t(this.box).find(".gallery-box-black").height(t(window).height()>t(document).height()?t(window).height():t(document).height()).width(t(window).width()>t(document).width()?t(window).width():t(document).width()),t(this.box).find(".gallery-box").offset().top+t(this.box).find(".gallery-box").height()>t(this.box).find(".gallery-box-black").height()&&t(this.box).find(".gallery-box-black").height(t(this.box).find(".gallery-box").offset().top+t(this.box).find(".gallery-box").height()),t(this.box).find(".gallery-box").width()>t(this.box).find(".gallery-box-black").width()&&t(this.box).find(".gallery-box-black").width(t(this.box).find(".gallery-box").width()),t(this.box).find(".gallery-box-black").css("position","absolute")),e>0?e+"px":0},this.appendAction=function(){t(this.box).find("a.gallery-box-left").click(function(){return e.showNext(!0)}),t(this.box).find("a.gallery-box-right").click(function(){return e.showNext(!1)}),t(document).keydown(function(i){t(e.box).is(":visible")&&(37==i.keyCode?(i.preventDefault(),e.showNext(!0)):39==i.keyCode?(i.preventDefault(),e.showNext(!1)):27==i.keyCode&&(i.preventDefault(),t(e.box).fadeOut(500)))}),t(this.box).find("a.gallery-box-close").click(function(){return t(e.box).fadeOut(500),!1}),t(this.box).find(".gallery-box-black").click(function(){t(e.box).fadeOut(500)})},this.create=function(i){this.box=t('<div class="gallery-box-all"'+(this.mark?' id="'+this.mark+'"':"")+">"+(i?'<div class="gallery-box-black"></div>':"")+"</div>"),t(this.box).append('<div class="gallery-box"><div class="gallery-box-content"><div class="gallery-box-image"><img /></div><div class="gallery-box-info">'+(this.arrows?'<a class="gallery-box-left" title="'+this.locale.prev+'"><span>'+this.icons.prev+"</span></a>"+(this.pager?'<span class="gallery-box-num-current">1</span> / <span class="gallery-box-num-count">'+this.count+"</span>":"")+'<a class="gallery-box-right" title="'+this.locale.next+'"><span>'+this.icons.next+"</span></a>":"")+'<a class="gallery-box-close" title="'+this.locale.close+'"><span>'+this.icons.close+"</span></a></div>"+(this.scale?'<a class="gallery-box-zoom" title="'+this.locale.zoom+'" target="_blank"></a>':"")+'<p class="gallery-box-title"></p></div></div>'),t("body").append(this.box)},this.load(this)&&(this.create(void 0===i.background||i.background),this.appendAction()),{showNum:function(t){e.showNum(t)},showNext:function(t){e.showNext(t)}}}}(jQuery);
